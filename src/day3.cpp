#include <vector>
#include <numeric>
#include <algorithm>
#include <iostream>
#include <string>

void main()
{
    std::vector<std::string> main_woods {
        ".##.............##......#.....#",
        ".#.#................#..........",
        "...#..#.##..#.#......#.#.#.#..#",
        "..#......#........#..#..#.#.#..",
        ".......#....#..#..#.......#....",
        "..#..#..##.#...#........#.###..",
        "..#...#..#.....#.##....#.......",
        "....#..###.#......#.##..#...##.",
        "..#..........#.##.#...#........",
        "#...#............##....#..##...",
        ".......##....#.....##..#.#..#.#",
        "..#..#..#...#....#....#....#...",
        ".#...#.##........#####........#",
        "..#..#......#.....##...#.......",
        "....#......##....#.#....#.#..##",
        "#.#.##....##..#.........#.###..",
        "##..###..#..#.......###.......#",
        "...#.#......#.........#....#...",
        ".....#..........#.....##..#.#..",
        "....##......#.#..#....#.#......",
        "..#.....#..##.......##......#..",
        ".........##.##.#..##...........",
        "....#...#.....#....#.#.###....#",
        ".##.#..#...##..#.......#......#",
        "##..#..#..####..#.#..#...#.....",
        "..###..#..#..#.###..#....#.##..",
        "......#...###.#.#.....#........",
        ".....#...#.#...#.......#.....#.",
        "#........#..##...........#..#..",
        ".#.##.##...#.....#.#....#..#...",
        "..##.##....#.....#....#....##..",
        "#.........##...##..#.....#..#..",
        "........#.####....#...##.....#.",
        ".#.#...#..#..#.#......##.....#.",
        "..#..........##..#.#.#....#...#",
        "#.......#...#...#.....#.##.#...",
        "..#.....#..#.....####.#..#.#.##",
        "...#.#..#...#.....#...#.#.#.#.#",
        ".#..##....##.....#..#....###...",
        "....#......##.#.#.....#......#.",
        "..#.#...#......#.....##.......#",
        "..#...###...#..#.#...#..#.....#",
        "#..............#.....#....##..#",
        ".#...#.......#.............#...",
        "..###....#.##........#.#.......",
        "#.##.......#..#............###.",
        "#...#..##.#.#............######",
        "..##..#....#.#.###...#..##.##..",
        ".#...#.###.#....#...#....#...#.",
        "#...#.......#...........#...##.",
        "##.#......#####.............#..",
        "....#..#......##..#..........#.",
        "#.....#.....#.#.......#...#...#",
        "....#...#.#..##........#.#..##.",
        "..##.....##............#.#.###.",
        "#.........#........#..###......",
        "............#..................",
        ".#.###...####...#.#..#......#..",
        "...##.###.#....##.#..####..#.##",
        "..#####.#.##...#.#...##.##....#",
        "........##...#...#....##.....##",
        "#...........###...#.#...##.#...",
        "##......#...#.......###........",
        "..#..#.##.#..###....#..#.###.#.",
        "...#.#.#...#....#.##..#...#....",
        "........#.##...##.#.....##...##",
        ".#..........##..#..#..#.#...#..",
        "#.#...#.##.#....#.##..#........",
        ".#.#.#....##..##.####.....###..",
        "..#....##....#..#..#..##.......",
        "..##...#.......#...##.#....#...",
        "...####.#.#...........#.#...#..",
        "....####.....#.#.....#....##.##",
        "..#.....#.#.............##....#",
        "#.#....#####.##..####.#...#.#..",
        "#.#....#.##.#.#.##..#.#...#....",
        "......#.......#.......#.....#..",
        "..#.....#....###.###..#..#..#..",
        "#..#....##.###...##.....#......",
        "..#..#...#..#.##..........#....",
        "...#.#.#......#....#.##..#..##.",
        "....##.#....#..#...##....###...",
        "##.#.###.....#..#.#.#..#.....##",
        "##..#.#........#...#..#.#......",
        "....#.#.......##.#...........#.",
        ".......##...#...#...#.....#....",
        ".....#....#..#..###.#...#......",
        "............#.#..#......#.#....",
        "...##..#.##....##..##.#......#.",
        "#.#.#......#.#.....#.#.#..#.#.#",
        "...###..........#..#..#.##.....",
        "......#......#......###..##....",
        "#...##...#....#....#..#...#.#..",
        ".......#..#......##.......#....",
        "...#..#..#.....#.....#......##.",
        "..#....###..........##..#...#..",
        "..........#..#.#...#......#..#.",
        "#...#....#.##.........#.#.#...#",
        ".#.#.#...#.#...#.#..#..#....#.#",
        "#.##....#..#.........#.##.##..#",
        "..#.#..##.#....#.###.#...#....#",
        ".#.......#...#.#.........#....#",
        ".......#...#..........#.#..#...",
        "...#.....##..#....#...###...#.#",
        "#....##.##..........#.......#..",
        ".##..##......#...#....#.##....#",
        "....#.....##...##.#..#.........",
        "...#.#..##.#.#..#.......#....#.",
        ".#...#.#.#.#..#..#.##.......#..",
        "..#..##...#.#..#.......#.#####.",
        ".......#.#...........#....#.#..",
        ".#.###..........#...#..#...#...",
        "..#.#............##......##....",
        "...##..#...###...##....#.#.##..",
        "....#.##...#..#.#.#...........#",
        "....#..#....##.....#.##.#.....#",
        "..##......##.#.........#....#.#",
        "###...#...#..#.#...#...........",
        ".####.....#.....#.#....#..#....",
        ".#....#..#..#..#...##.....###.#",
        "#....##.#....#.##..#......##..#",
        ".........#..#.#.....#.#....##.#",
        ".....#.#...#....#.#...#....#..#",
        ".#...#.#.....#.#......#.#......",
        "#....##.......#.............#..",
        "#..#...#........##..#..#......#",
        "####..##.#..##..#.........####.",
        ".#.##..#.#..#.#.#.##...#..#.#.#",
        ".##.#..#............#......#...",
        "###....#.##....#..#...#........",
        ".....#..###..........#..#......",
        ".##..##.....#..##....#...#.....",
        "#...##...........#..#...###..#.",
        "#..##....#...#.##.##....#......",
        "...#...#..#.#.......##.......##",
        "....#.....#..#...#.........#.#.",
        ".#...##.#......#.#..#..#...##..",
        "...##...##.##...##...#..#......",
        "#..##.#..#..#............#...#.",
        "..#.....#.........#........#.#.",
        "#.#...#...#......#.#......#....",
        ".##.....##.#.#....#.##...##.#..",
        ".##..##.#.#....#.##............",
        ".#.##.....##.#...#...###....#..",
        ".#..............#.#....###.###.",
        "....#..#...#.#.#..........#.#.#",
        ".#.#..#.#.#...###..#...##......",
        ".#.#.....###......#..........#.",
        "........#.##...............#.#.",
        "...#.#.#......#..#..##........#",
        "..#.##......#.......#..#......#",
        "...#...#...#...#..#..#........#",
        "..#....#.....#....#..##........",
        ".....#..#...##....#......##....",
        "...##..##..#..........##....#.#",
        "..#....#..#...#.##..#.....##...",
        "###...#.#....#........#.......#",
        "......#...#..#....###.........#",
        "..###.#...#...#...#.#..###.#...",
        ".##.#.......#.#..#..#......#.#.",
        "...##...........#.#..#.#..#....",
        ".......#.....####.#.....#...#.#",
        "......##......##.#.#.#...#.#..#",
        "..###.#####..#....#.#...#..##..",
        ".....#..#......#........#......",
        "#..##....#.#.##....#....#......",
        ".#....#.##.####.##..#..#......#",
        "#...##...#.#...##.#.##.##...#..",
        "........#.#........#.#...#..#..",
        ".#....###..#......#.##.###..#..",
        ".#..#..#..#..#...#.#.........##",
        "....#...#..#..............#....",
        "........#...##.....#.......#...",
        "..#......#.#..#.#..#.#.#...###.",
        "....#...####....###....#......#",
        "#...#.#...................#.##.",
        "..#.#.###...#....##....##......",
        "#..##..#.........#....#....####",
        ".#....###...#.#...#......#...#.",
        "......#..#.#..#.##...#.#.#..#..",
        ".#...#.#.....#..##......#..#...",
        "##.#..##.....##.#.#.......##...",
        ".##.##.##..#...#.#.##.##.......",
        ".#.#......#.....#...#.#..#.....",
        "...#...........#..#.##..##..#..",
        ".....#...##......#........#.#..",
        "....#..............##.........#",
        "..####.#....##..##......##.#.#.",
        ".#.#..#...#..........#...###..#",
        "....#.#.##.....###.#..#.##.....",
        ".......##.#.#..#...#...##.#....",
        "...#.##.....#....#...#...#.....",
        "##.#.##..#..#.#.....#.#..#.....",
        "..#..##........#....###..#..#..",
        "..#.........##.....#......#...#",
        "...##..........##......#.#.#...",
        "#.....#..#..#......#......#....",
        ".##...#..##....#.......##..#.#.",
        ".#...##...##......####.##.#....",
        ".....#.........#.#.####......#.",
        "...#.....#.#.........##..#.....",
        "##.#.###.#..#.#..#............#",
        "...##..#.#....#....#..#........",
        "..#.###......#...#.#.....#...#.",
        "....##.##..#.....#...#.#.#....#",
        ".......#.#..#...........#.#....",
        ".#.#..##.#.......#.#..#.....###",
        "...#.#.....#.#..#.##..#...#.#..",
        "...#......##....#..............",
        "......#...#....................",
        "..#........#...##.##.#..#.#.#..",
        ".#.###.#.##..##..#....##....#..",
        ".....#..#.#...#.#..#..#.......#",
        "..........#.##.#..##..####.....",
        "............#.#......#.........",
        ".#....#..#......#.....##.......",
        ".....#........#.....##.#..#.#..",
        "#..#.##...#.#.....#...#.####...",
        "......#...#....#.##..##.#...#..",
        ".#.#.##......##....#.#....#.##.",
        "#.#.#....#.###....##....##.....",
        ".##..#...#.##......#..#..#...##",
        "...#....###....#...........#.#.",
        "#.#.##.##...##....#....##.#...#",
        ".#.#######.......#......#......",
        "#......#...#.#.#.###....#.##..#",
        "......##..#..##.........##.#.##",
        "....##...#.#....##.....#.....#.",
        "..#.#........##........#.#..##.",
        ".....#..#.##.....#.....#..#.#..",
        ".#..............#.......#......",
        ".............#..#..........#...",
        ".#..#.##....##.#..#...##.......",
        "...........#..#.......#.#....#.",
        ".#..#..........##...#.#.#...#..",
        "......#....#..###....#......#..",
        ".#...#...##..#..#..##..#..#.#..",
        "#.#.........#....#..........##.",
        "...##..#..##...#....##...##.##.",
        "..#....#.####.........#.....##.",
        ".....#.#...#.#...#.##.#...##..#",
        "#...#.....#..#.......#...#..#..",
        "..#.......#..##.#.....#....#...",
        ".#.....#..##.#.....#...#.#...#.",
        ".....#.##..........##....#...#.",
        "...#....#...#........##...#...#",
        "....##...#....#..........#.....",
        "...#....##..#..####..##.#...#.#",
        "#...###.###..#....##.#.........",
        ".#.......#......#.........#....",
        "..#..##..#.........##..........",
        "#......#.#.##...#...#####......",
        "......#.....####......#....#...",
        ".........#..#..#...#....#.#....",
        "....#........#...##....#.......",
        "...##.#...#..........#....#....",
        "........#.......#.##..#..#...#.",
        "....#..##...........#.....#..#.",
        "#....#...............#.#....#..",
        ".#........#....#.#...#.......#.",
        "#.......##..........#.......#..",
        "...#....#...##.#..#.......#....",
        "#..#.##...#.#...#...#...#....#.",
        "###...#...#....#....#....#...#.",
        "##......#.#.......#....#..#....",
        "......#......#....#.#.#..###..#",
        ".#.#.##.....#..#..........#....",
        "##...#.#.#..##....#.....#.#....",
        "#.##...#...#.#...####..#.......",
        ".....##..#.#.#....#..##..#.#...",
        "....###.#.........##.....#.....",
        "......##...........#........#.#",
        ".#.........##..................",
        ".........##...#.............#.#",
        "......##...#...#.........#..##.",
        "#..#.......#..##.......###.....",
        "....#.#.....#............##....",
        ".....#..#......#....#.....##...",
        "##......##...................#.",
        "#....#............#.#.###.##...",
        ".#.....#........#.....#...#....",
        "......##.......######......##..",
        ".#....##....#..###....#.......#",
        "..............##.#..#.......#.#",
        ".#..#..........#..#.##.........",
        "......##.#..#......#.#....##.#.",
        "#.....#.##...#.....#...#..#...#",
        ".#....#..##.....#.....#.#.#....",
        "..#......#.##..#.........#.#.#.",
        ".#..##...#...#.....#..#..#.#..#",
        "#.#.##.##.................#.#.#",
        ".#..#.#..##.#.......#.......##.",
        "#...#...#..##...#...##...#...#.",
        "....#......#..#...#.....##..#..",
        "..............##......#...#.#..",
        "..##..#.......#..#..###.#.#....",
        ".#..#..#...#.......#...#...##.#",
        ".#...#.......###..#.##.###.....",
        "##.#...#......#.....#..#.......",
        "##....##............#.....#..#.",
        ".....#...##......##.....#....##",
        "#...##..#....#..##....###.#...#",
        ".....#..#.#.....#.##..##....#..",
        ".#.....#.#........#...#.#......",
        "......#....#.#........#.#......",
        ".##..#...............###...##.#",
        ".......###.#.#......###.....#..",
        ".......#..##...#....#.##..#.##.",
        "..#.......##.......#.....#....#",
        ".#......#....#..##..#.#.#..##..",
        "###......#...#..#.............#",
        ".#....#..#.#......##...........",
        ".#....#.##.....#..#.......#..##",
        "....#...#...#..#.....#..##..#.#",
        "#.#.#.......##.#..#.#....#.....",
        "##.#.......#...#...#.#......##.",
        "#....#.#...........#######.....",
        "...#.#.##.#......##..###.......",
        "..#.#....#..#.................#",
        "........#..##..#.....#....#.##.",
        "...#.#..#..#..#..............##",
        ".##.......###.#......#....#..##",
        "..##.##.#......#....#..#...#..#",
    };

    std::vector<std::string> test_woods {
        "..##.......",
        "#...#...#..",
        ".#....#..#.",
        "..#.#...#.#",
        ".#...##..#.",
        "..#.##.....",
        ".#.#.#....#",
        ".#........#",
        "#.##...#...",
        "#...##....#",
        ".#..#...#.#",
    };

    auto trees_encountered = [&](const std::vector<std::string>& woods,int dx,int dy){
        int stride = woods[0].size();
        size_t trees = 0; // size_t pain! was int and overflowed :(
        int x = dx;
        int y = dy;
        int pos = y*stride+x;
        int max_pos = woods.size()*stride;

        while(y < woods.size()){
            if(woods[y][x] == '#'){
                trees++;
            }
            x = (x+dx) % stride;
            y = y+dy;
        }
        return trees;
    };

    std::cout << trees_encountered(main_woods,3,1) << std::endl;

    std::cout << trees_encountered(main_woods,1,1) << std::endl;
    std::cout << trees_encountered(main_woods,3,1) << std::endl;
    std::cout << trees_encountered(main_woods,5,1) << std::endl;
    std::cout << trees_encountered(main_woods,7,1) << std::endl;
    std::cout << trees_encountered(main_woods,1,2) << std::endl;

    std::cout << trees_encountered(main_woods,1,1)*trees_encountered(main_woods,3,1)*trees_encountered(main_woods,5,1)*trees_encountered(main_woods,7,1)*trees_encountered(main_woods,1,2) << std::endl;
}